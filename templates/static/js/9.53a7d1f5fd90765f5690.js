webpackJsonp([9],{186:function(e,t,i){i(756);var o=i(24)(i(690),i(770),"data-v-6e6a4c42",null);e.exports=o.exports},202:function(e,t){var i=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},205:function(e,t,i){e.exports={default:i(207),__esModule:!0}},207:function(e,t,i){var o=i(202),r=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},690:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var o=i(205),r=i.n(o);!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?5f228c169bee6b288c0b4652cccda107";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),t.default={name:"qsFill",data:function(){return{qsItem:[],qsList:[],isError:!1,showDialog:!1,info:"",submitError:!1,requiredItem:{}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t={};t.user=this.$route.params.user,t.num=this.$route.params.num,console.log("testing"),console.log(this.$route.params.user),console.log(this.$route.params.num);var i=this;e.ajax({type:"post",url:"../fillList/",data:r()(t),contentType:"application/json; charset=UTF-8",dataType:"json",success:function(e){console.log("success"),i.qsItem=e[0],console.log(i.qsItem),i.qsItem.question.forEach(function(e){e.isNeed&&("checkbox"===e.type?i.requiredItem[e.num]=[]:i.requiredItem[e.num]="")})},error:function(e){alert("问卷查询出现错误")}})},getMsg:function(e){var t="";return"radio"===e.type?t="(单选题)":"checkbox"===e.type?t="(多选题)":"textarea"===e.type?t="(文本题)":"rate"===e.type?t="(1表示完全不同意，3表示中立，5表示完全同意)":"scene"===e.type&&(t="(情景题)"),e.isNeed?t+" *":t},submit:function(){var t=this;if("inissue"===this.qsItem.state){if(this.validate()){console.log(this.requiredItem),this.showDialog=!0,this.submitError=!1;var i={};i.num=this.qsItem.num,i.user=this.qsItem.user,i.question=this.requiredItem,e.ajax({type:"post",url:"../addChoose/",data:r()(i),contentType:"application/json; charset=UTF-8",dataType:"json",success:function(e){e.status},error:function(e){alert("提交问卷失败！")}}),this.info="提交成功！",setTimeout(function(){t.showDialog=!1},2e3),setTimeout(function(){t.$router.push({path:"/"})},500)}else this.showDialog=!0,this.submitError=!0,this.info="提交失败！ 存在必填项未填"}else this.showDialog=!0,this.submitError=!0,this.info="提交失败！ 只有发布中的问卷才能提交"},validate:function(){for(var e in this.requiredItem)if(0===this.requiredItem[e].length)for(var t=0;t<this.qsItem.question.length;t++){if(this.qsItem.question[t].num==e&&"scene"!=this.qsItem.question[t].type)return!1;if(this.qsItem.question[t].num==e&&0==this.qsItem.question[t].isHidden)return!1}return!0},showNext:function(e,t){for(var i=void 0,o=0;o<this.qsItem.question.length;o++)if(this.qsItem.question[o].num==e){for(var r=0;r<this.qsItem.question[o].options.length;r++)this.qsItem.question[o].options[r]==t&&(i=this.qsItem.question[o].scene[r]);for(var a=o+1;a<this.qsItem.question.length;a++)this.requiredItem[this.qsItem.question[a].num]="",this.qsItem.question[a].isHidden=!0;break}console.log("next"),console.log(i),"0"==i&&this.$message("已经是最后一题，可提交问卷");for(var n=0;n<this.qsItem.question.length;n++)this.qsItem.question[n].num==i&&(this.qsItem.question[n].isHidden=!1)}},watch:{$route:"fetchData"}}}.call(t,i(71))},742:function(e,t,i){t=e.exports=i(179)(),t.push([e.i,".fill-container[data-v-6e6a4c42]{width:100rem;margin:5rem auto;padding:5rem;color:#666;background-color:#fff;border-radius:.4rem;box-shadow:0 0 1rem #aaa}.fill-container h2[data-v-6e6a4c42]{margin-bottom:3rem;text-align:center;font-size:2rem;color:#555}.fill-container .back[data-v-6e6a4c42]{font-size:1.6rem;cursor:pointer}.fill-container .back[data-v-6e6a4c42]:hover{color:#1e90ff}.fill-container .content[data-v-6e6a4c42]{padding:3rem;border-top:.2rem solid #ccc;border-bottom:.2rem solid #ccc}.fill-container .content-item[data-v-6e6a4c42]{padding:1.5rem 2rem}.fill-container .content-item[data-v-6e6a4c42]:hover{background-color:#fcf0e5}.fill-container .content-item>p[data-v-6e6a4c42]{margin-top:1.5rem;margin-bottom:1.5rem}.fill-container .content-item>textarea[data-v-6e6a4c42]{width:35rem;height:15rem;margin-left:2.5rem}.fill-container .content-item .qs-title[data-v-6e6a4c42]{font-size:1.6rem;font-weight:700;color:#333}.fill-container .content-item .option[data-v-6e6a4c42]{margin-left:2.5rem}.fill-container footer[data-v-6e6a4c42]{height:6rem;margin-top:3rem;text-align:center;line-height:6rem}.fill-container footer .submit[data-v-6e6a4c42]{width:10rem;height:3rem;padding-top:.3rem;padding-bottom:.3rem;line-height:100%;color:#fff;border:.1rem solid #1e90ff;border-radius:.2rem;background-color:#1e90ff;cursor:pointer}.fill-container footer .submit[data-v-6e6a4c42]:hover{box-shadow:0 0 5px #1e90ff}.fill-container .fade-enter-active[data-v-6e6a4c42],.fill-container .fade-leave-active[data-v-6e6a4c42]{transition:opacity .5s}.fill-container .fade-enter[data-v-6e6a4c42],.fill-container .fade-leave-active[data-v-6e6a4c42]{opacity:0}.fill-container .dialog[data-v-6e6a4c42]{position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(85,85,85,.7)}.fill-container .dialog .submit-dialog[data-v-6e6a4c42]{position:absolute;left:50%;top:50%;width:40rem;height:20rem;transform:translateX(-50%) translateY(-50%);border-radius:.5rem;box-shadow:0 0 5px #555;background-color:#fff}.fill-container .dialog header[data-v-6e6a4c42]{height:5rem;padding-left:3rem;padding-right:3rem;line-height:5rem;border-radius:.5rem;background-color:#f7f7f7}.fill-container .dialog header span[data-v-6e6a4c42]:first-of-type{font-weight:700}.fill-container .dialog header .close-btn[data-v-6e6a4c42]{position:absolute;right:3rem;color:#bbb;cursor:pointer}.fill-container .dialog header .close-btn[data-v-6e6a4c42]:hover{color:#1e90ff}.fill-container .dialog .submit-dialog p[data-v-6e6a4c42]{margin-top:3rem;margin-left:3rem}.fill-container .dialog .btn-box[data-v-6e6a4c42]{position:absolute;bottom:0;width:100%;height:6rem;text-align:center;line-height:6rem}.fill-container .dialog .btn-box button[data-v-6e6a4c42]{width:7rem;height:2.5rem;padding-top:.3rem;padding-bottom:.3rem;line-height:100%;color:#777;border:1px solid #555;border-radius:.2rem;background-color:#fff;cursor:pointer}.fill-container .dialog .btn-box button[data-v-6e6a4c42]:hover{box-shadow:0 0 5px #bbb}.fill-container .dialog .btn-box .yes[data-v-6e6a4c42]{margin-right:1rem;color:#fff;background-color:#1e90ff;border:1px solid #1e90ff}.fill-container .dialog .btn-box .yes[data-v-6e6a4c42]:hover{box-shadow:0 0 5px #1e90ff}",""])},756:function(e,t,i){var o=i(742);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(180)("56f830c8",o,!0)},770:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fill-container"},[e.isError?i("div",{staticClass:"error"},[e._v("\n    404 Not Found\n  ")]):i("div",{staticClass:"fill"},[i("router-link",{staticClass:"back",attrs:{to:"/list",tag:"span"}},[e._v("< 返回")]),e._v(" "),i("h2",[e._v(e._s(e.qsItem.title))]),e._v(" "),i("div",{staticClass:"content"},e._l(e.qsItem.question,function(t){return i("div",{staticClass:"content-item"},[t.isHidden?e._e():i("div",[i("p",{staticClass:"qs-title",staticStyle:{"margin-bottom":"10px"}},[e._v("\n            "+e._s(t.num)+" "+e._s(t.title)+" "+e._s(e.getMsg(t))+"\n          ")]),e._v(" "),e._l(t.options,function(o){return"radio"===t.type||"checkbox"===t.type||"scene"===t.type?i("p",{staticClass:"option"},[i("label",{staticStyle:{"margin-right":"8px"}},["radio"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.requiredItem[t.num],expression:"requiredItem[item.num]"}],attrs:{type:"radio",id:"radio",name:t.num+"-"+t.title},domProps:{value:o,checked:e._q(e.requiredItem[t.num],o)},on:{change:function(i){e.$set(e.requiredItem,t.num,o)}}}):e._e(),e._v(" "),"checkbox"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.requiredItem[t.num],expression:"requiredItem[item.num]"}],attrs:{type:"checkbox",id:"checkbox",name:t.num+"-"+t.title},domProps:{value:o,checked:Array.isArray(e.requiredItem[t.num])?e._i(e.requiredItem[t.num],o)>-1:e.requiredItem[t.num]},on:{change:function(i){var r=e.requiredItem[t.num],a=i.target,n=!!a.checked;if(Array.isArray(r)){var s=o,c=e._i(r,s);a.checked?c<0&&e.$set(e.requiredItem,t.num,r.concat([s])):c>-1&&e.$set(e.requiredItem,t.num,r.slice(0,c).concat(r.slice(c+1)))}else e.$set(e.requiredItem,t.num,n)}}}):e._e(),e._v(" "),"scene"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.requiredItem[t.num],expression:"requiredItem[item.num]"}],attrs:{type:"radio",id:"radio",name:t.num+"-"+t.title},domProps:{value:o,checked:e._q(e.requiredItem[t.num],o)},on:{change:function(i){e.$set(e.requiredItem,t.num,o)}}}):e._e(),e._v(" "),"rate"!=t.type?i("span",[e._v("\n                "+e._s(o)+"\n              ")]):e._e(),e._v(" "),"scene"===t.type?i("el-button",{staticStyle:{"margin-bottom":"3px","margin-left":"5px"},on:{click:function(i){e.showNext(t.num,e.requiredItem[t.num])}}},[e._v("\n                下一题\n              ")]):e._e()],1)]):e._e()}),e._v(" "),e._l(t.options,function(o){return"rate"===t.type?i("p",{staticClass:"option",staticStyle:{float:"left"}},[i("label",{staticStyle:{"margin-right":"8px"}},["rate"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.requiredItem[t.num],expression:"requiredItem[item.num]"}],attrs:{type:"radio",id:"radio",name:t.num+"-"+t.title},domProps:{value:o,checked:e._q(e.requiredItem[t.num],o)},on:{change:function(i){e.$set(e.requiredItem,t.num,o)}}}):e._e(),e._v(e._s(o)+"\n            ")])]):e._e()})],2),e._v(" "),"textarea"===t.type?i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.requiredItem[t.num],expression:"requiredItem[item.num]"}],attrs:{id:"textarea"},domProps:{value:e.requiredItem[t.num]},on:{input:function(i){i.target.composing||e.$set(e.requiredItem,t.num,i.target.value)}}}):e._e()])})),e._v(" "),i("transition",{attrs:{name:"fade"}},[e.showDialog?i("div",{staticClass:"dialog"},[e.submitError?i("div",{staticClass:"submit-dialog"},[i("header",[i("span",[e._v("提示")]),e._v(" "),i("span",{staticClass:"close-btn",on:{click:function(t){e.showDialog=!1}}},[e._v("X")])]),e._v(" "),i("p",[e._v(e._s(e.info))]),e._v(" "),i("div",{staticClass:"btn-box"},[i("button",{staticClass:"yes",on:{click:function(t){e.showDialog=!1}}},[e._v("确定")]),e._v(" "),i("button",{on:{click:function(t){e.showDialog=!1}}},[e._v("取消")])])]):i("div",{staticClass:"submit-dialog"},[i("header",[i("span",[e._v("提示")]),e._v(" "),i("span",{staticClass:"close-btn",on:{click:function(t){e.showDialog=!1}}},[e._v("X")])]),e._v(" "),i("p",[e._v(e._s(e.info))])])]):e._e()]),e._v(" "),i("footer",[i("button",{staticClass:"submit",on:{click:e.submit}},[e._v("提交")])])],1)])},staticRenderFns:[]}}});